{{ define "simulatorFrag" }}
<!---------- Title above simulator window ---------->
<div class="row">
  {{ if and (.IsLoggedIn) (.Data.isOwner) }}
    <div class="input-field col s3">
      {{ if .Data.simulation.Name }}
        <input id="simulation-name" type="text" value="{{ .Data.simulation.Name }}" onkeypress="resetSaveButton()"></input>
      {{ else }}
        <input id="simulation-name" type="text" value="New Simulation" onkeypress="resetSaveButton()"></input>
      {{ end }}
      <label for="simulation-name" id="simulation-name-label">Simulation Name</label>
    </div>
    <!-- Only show if it is NOT a new simulation-name -->
    {{ if (.Data.simulation.KeyName) }}
    <div class="col s1 right pad-sides">
      <h4>
        <a class="waves-effect waves-light btn-floating red darken-1" id="delete-button"
        onclick="deleteSimulation('/simulator/{{ .Data.simulation.Type }}/{{ .Data.simulation.KeyName }}', '/simulator/{{ .Data.simulation.Type }}', null)">
          <i class="fa fa-remove"></i>
        </a>
      </h4>
    </div>
    {{ end }}
    <div class="col s1 right pad-sides">
      <h4><a class="waves-effect waves-light btn-floating green darken-1" id="save-button" onclick="saveSimulation()"><i class="fa fa-floppy-o"></i></a></h4>
    </div>
    <!-- Private/Public Checkbox -->
    <div class="col s2 right private-checkbox">
      <div class="switch">
        <label>
          Public
          {{ if .Data.simulation.IsPrivate }}
            <input id="simulation-is-private" checked="true" type="checkbox" onclick="resetSaveButton()">
          {{ else }}
            <input id="simulation-is-private" type="checkbox" onclick="resetSaveButton()">
          {{ end }}
          <span class="lever"></span>
          Private
        </label>
      </div>
    </div>
    {{ if .Data.simulation.Name }}
    <div class="col s1 right pad-sides">
      <h4 id="ratings" class="tooltipped" data-position="left" data-delay="50" data-tooltip="Loading Stars...">
        <i class="fa fa-star waves-effect waves-light grey-text text-lighten-1"></i>
      </h4>
    </div>
    {{ end }}
  {{ else }}
    <div class="col s4">
      {{ if .Data.simulation.Name }}
        <h4 class="page-header">{{ .Data.simulation.Name }}</h4>
        <small>By: {{ .Data.simulationAuthorDisplay }}</small>
      {{ else }}
        <h4 class="page-header">Simulation</h4>
      {{ end }}
    </div>
    {{ if .Data.simulation.Name }}
    <div class="col s1 right pad-sides">
      <h4 id="ratings" class="tooltipped" data-position="left" data-delay="50" data-tooltip="Loading Stars...">
        {{ if .IsLoggedIn }}
          <a onclick="saveRating()"><i id="star-icon" class="fa fa-star-o waves-effect waves-light yellow-text text-accent-4"></i></a>
        {{ else }}
          <i class="fa fa-star waves-effect waves-light grey-text text-lighten-1"></i>
        {{ end }}
      </h4>
    </div>
    {{ end }}
  {{ end }}
</div>
<!---------- End Title above simulator window ---------->

<a id="help-tooltips" class="clickable"><i class="fa fa-question fa-size-medium"></i></a>

<!---------- Simulator and property window  ---------->
<div class="row">
  <!-- Simulator -->
  <div class="col s8">
    <!-- This div has to have the id "viewport" for PhysicsJS to render here -->
    <div style="height: 500px;" id="viewport" class="white card"></div>
  </div>

  <!-- Property Window -->
  <div class="col s4 card scrollable-tools" style="height: 500px;">
    <!-- Tabs -->
    <ul id="property-tabs" class="tabs">
      <li class="tab col s4 valign-wrapper"><a class="property-tab blue-text valign active" href="#toolbox" id="toolbox-tab"><i class="fa fa-cubes fa-size-medium"></i></a></li>
      <li class="tab col s4"><a class="property-tab blue-text valign" href="#elementprops" id="elementprops-tab"><i class="fa fa-info-circle fa-size-medium"></i></a></li>
      <li class="tab col s4"><a class="property-tab blue-text valign" href="#globalprops" id="globalprops-tab"><i class="fa fa-globe fa-size-medium"></i></a></li>
      <li class="tab col s4 "><a class="property-tab blue-text valign" href="#overview" id="overview-tab"><i class="fa fa-list fa-size-medium"></i></a></li>

      <div class="indicator blue" style="z-index: 1;"></div>
    </ul>

    <!-- Toolbox -->
    <div id="toolbox">
      <div class="center-align">
        <h5 class="pad-sides">Toolbox</h5>
        <ul class="property-window-list">
          <li class="toolbox-item-container card" title="Square Point Mass">
            <span class="activator clickable toolbox-tooltip"><i class="fa fa-question-circle fa-size-tiny"></i></span>
            <div class="valign-wrapper">
              <img class="toolbox-item draggable clickable responsive-img valign" width="100" src="/static/img/toolbox/squaremass.png" component="kinematics1D-squaremass"/>
            </div>
            <div class="card-reveal">
              <span class="card-title clickable left"><i class="fa fa-times fa-size-tiny"></i></span>
              <p>Point Masses are the staple of Principia. They can be given velocity, acceleration, mass, size, or drawn with different images.</p>
            </div>
          </li>
          <li class="toolbox-item-container card" title="Round Point Mass">
            <span class="activator clickable toolbox-tooltip"><i class="fa fa-question-circle fa-size-tiny"></i></span>
            <div class="valign-wrapper">
              <img class="toolbox-item draggable clickable responsive-img valign" width="100" src="/static/img/toolbox/roundmass.png" component="kinematics1D-roundmass"/>
            </div>
            <div class="card-reveal">
              <span class="card-title clickable left"><i class="fa fa-times fa-size-tiny"></i></span>
              <p>Point Masses are the staple of Principia. They can be given velocity, acceleration, mass, size, or drawn with different images.</p>
            </div>
          </li>
          <li class="toolbox-item-container card" title="Surface">
            <span class="activator clickable toolbox-tooltip"><i class="fa fa-question-circle fa-size-tiny"></i></span>
            <div class="valign-wrapper">
              <img class="toolbox-item draggable clickable responsive-img valign" width="100" src="/static/img/toolbox/surface.png" component="kinematics1D-surface"/>
            </div>
            <div class="card-reveal">
              <span class="card-title clickable left"><i class="fa fa-times fa-size-tiny"></i></span>
              <p>Surfaces are static and affect the movement of point mass objects.</p>
            </div>
          </li>
          <li class="toolbox-item-container card" title="Ramp">
            <span class="activator clickable toolbox-tooltip"><i class="fa fa-question-circle fa-size-tiny"></i></span>
            <div class="valign-wrapper">
              <img class="toolbox-item draggable clickable responsive-img valign" width="100" src="/static/img/toolbox/ramp.png" component="kinematics1D-ramp"/>
            </div>
            <div class="card-reveal">
              <span class="card-title clickable left"><i class="fa fa-times fa-size-tiny"></i></span>
              <p>Ramps are static and affect the movement of point mass objects.</p>
            </div>
          </li>
          <li class="toolbox-item-container card" title="Spring">
            <span class="activator clickable toolbox-tooltip"><i class="fa fa-question-circle fa-size-tiny"></i></span>
            <div class="valign-wrapper">
              <img class="toolbox-item draggable clickable responsive-img valign" width="100" src="/static/img/toolbox/spring.png" component="kinematics1D-spring"/>
            </div>
            <div class="card-reveal">
              <span class="card-title clickable left"><i class="fa fa-times fa-size-tiny"></i></span>
              <p>Attatch a point mass to the right end of a spring to see it in action.</p>
            </div>
          </li>
          <!-- Pulley
          <li class="toolbox-item-container card" title="Pulley">
            <span class="activator clickable toolbox-tooltip"><i class="fa fa-question-circle fa-size-tiny"></i></span>
            <div class="valign-wrapper">
              <img class="toolbox-item draggable clickable responsive-img valign" width="100" src="/static/img/toolbox/pulley.png" component="kinematics1D-pulley"/>
            </div>
            <div class="card-reveal">
              <span class="card-title clickable left"><i class="fa fa-times fa-size-tiny"></i></span>
              <p>Drag two point mass objects into a pulley to attach them. Then drag one below, give them weights, set gravity and give it a whirl.</p>
            </div>
          </li> -->
          <!-- Rope
            <li class="toolbox-item-container card" title="Rope">
              <span class="activator clickable toolbox-tooltip"><i class="fa fa-question-circle fa-size-tiny"></i></span>
              <div class="valign-wrapper">
                <img class="toolbox-item draggable clickable responsive-img valign" width="100" src="/static/img/toolbox/rope.png" component="kinematics1D-rope"/>
              </div>
              <div class="card-reveal">
                <span class="card-title clickable left"><i class="fa fa-times fa-size-tiny"></i></span>
                <p>These are currently in progress of being added.</p>
              </div>
            </li>
          -->
        </ul>
      </div>
      <div class="clear"></div>
    </div>

    <!-- Properties window for each element -->
    <div id="elementprops">
      <div class="center-align">
        <h5 class="pad-sides"><span id="general-properties-nickname-title"></span>Element Properties</h5>

        <!-- Properties that apply to all components -->
        <ul class="property-window-list hide" id="general-properties">
          <li class="property-item">
            <div class="input-field">
              <input type="text" id="general-properties-nickname" placeholder=""></input>
              <label for="general-properties-nickname" class="active">Nickname</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <a class="waves-effect waves-light btn red darken-1" onclick="deleteBody()">Remove <i class="fa fa-trash"></i></a>
            </div>
          </li>
          <li class="property-item" principia-property="posx">
            <div class="input-field">
              <input type="number" id="general-properties-position-x" placeholder="" title="Enter a number"></input>
              <label for="general-properties-position-x" class="active" id="x-position-label">X Position</label>
            </div>            
          </li>
          <li class="property-item" principia-property="posy">
            <div class="input-field">
              <input type="number" id="general-properties-position-y" placeholder="" title="Enter a number"></input>
              <label for="general-properties-position-y" class="active" id="y-position-label">Y Position</label>
            </div>            
          </li>
        </ul>

        <!-- Properties that apply to point mass components -->
        <ul class="property-window-list hide" id="pointmass-properties">
          <li class="property-item" principia-property="velx">
            <div class="input-field">
              <input type="number" id="pointmass-properties-velocity-x" placeholder="" title="Enter a number"></input>
              <label for="pointmass-properties-velocity-x" class="active" id="x-velocity-label">X Velocity</label>
            </div>            
          </li>
          <li class="property-item" principia-property="vely">
            <div class="input-field">
              <input type="number" id="pointmass-properties-velocity-y" placeholder="" title="Enter a number"></input>
              <label for="pointmass-properties-velocity-y" class="active" id="y-velocity-label">Y Velocity</label>
            </div>            
          </li>
          <li class="property-item" principia-property="accx">
            <div class="input-field">
              <input type="number" id="pointmass-properties-acceleration-x" placeholder="" title="Enter a number"></input>
              <label for="pointmass-properties-acceleration-x" class="active" id="x-acceleration-label">X Acceleration</label>
            </div>            
          </li>
          <li class="property-item" principia-property="accy">
            <div class="input-field">
              <input type="number" id="pointmass-properties-acceleration-y" placeholder="" title="Enter a number"></input>
              <label for="pointmass-properties-acceleration-y" class="active" id="y-acceleration-label">Y Acceleration</label>
            </div>            
          </li>
          <li class="property-item">
            <div class="input-field">
              <input type="number" id="pointmass-properties-mass" placeholder="" title="Enter a number"></input>
              <label for="pointmass-properties-mass" class="active">Mass</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <input type="text" id="pointmass-properties-size" placeholder=""></input>
              <label for="pointmass-properties-size" class="active">Size</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <select id="pointmass-properties-img" class="browser-default">
                <option disabled>Display As:</option>
                <option selected="selected">Mass</option>
                <option value="2">Weight</option>
                <option value="3">Car</option>
                <option value="4">Sail Boat</option>
                <option value="5">Speed Boat</option>
                <option value="6">Mascot</option>
                <option value="7">Dart</option>
                <option value="8">Jogger</option>
                <option value="9">Rocket</option>
                <option value="10">Dalton</option>
                <option value="11">Danny</option>
                <option value="12">Matthew</option>
                <option value="13">Sam</option>
                <option value="14">Logo</option>
              </select>
              <label for="pointmass-properties-img" class="active">Display As</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <span>Vectors</span>
              <div class="switch">
                <label>
                  Off
                  <input class="vector-toggle" id="pointmass-properties-vector" type="checkbox" checked="checked"></input>
                  <span class="lever"></span>
                  On
                </label>
              </div>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <span>Tip-to-Tail Vectors</span>
              <div class="switch">
                <label>
                  Off
                  <input class="ttt-toggle" id="pointmass-properties-vector-ttt" type="checkbox"></input>
                  <span class="lever"></span>
                  On
                </label>
              </div>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <span>PVA Graph</span>
              <div class="switch">
                <label>
                  Off
                  <input class="pvagraph-toggle" id="pointmass-properties-pvagraph" type="checkbox"></input>
                  <span class="lever"></span>
                  On
                </label>
              </div>
            </div>
          </li>
        </ul>

        <!-- Surface properties! -->
        <ul class="property-window-list hide" id="surface-properties">
          <li class="property-item">
            <div class="input-field">
              <input type="number" id="surface-properties-width" placeholder="" title="Enter a number"></input>
              <label for="surface-properties-width" class="active">Width</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <input type="number" id="surface-properties-height" placeholder="" title="Enter a number"></input>
              <label for="surface-properties-height" class="active">Height</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <input type="number" id="surface-properties-friction" placeholder="" title="Enter a number"></input>
              <label for="surface-properties-friction" class="active">Friction</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <a class="waves-effect waves-light btn" id="surface-properties-rotate">Rotate</a>
            </div>
          </li>
        </ul>

        <!-- Ramp properties! -->
        <ul class="property-window-list hide" id="ramp-properties">
          <li class="property-item">
            <div class="input-field">
              <input type="number" id="ramp-properties-width" placeholder="" title="Enter a number"></input>
              <label for="ramp-properties-width" class="active">Width</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <input type="number" id="ramp-properties-height" placeholder="" title="Enter a number"></input>
              <label for="ramp-properties-height" class="active">Height</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <input type="number" id="ramp-properties-angle" placeholder="" title="Enter a number"></input>
              <label for="ramp-properties-angle" class="active">Slope as Angle ยบ</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <input type="number" id="ramp-properties-friction" placeholder="" title="Enter a number"></input>
              <label for="ramp-properties-friction" class="active">Friction</label>
            </div>
          </li>
          <li class="property-item">
            <div class="input-field">
              <a class="waves-effect waves-light btn" id="ramp-properties-flip-horz">Flip Horz.</a>
            </div>
          </li>          
          <li class="property-item">
            <div class="input-field">
              <a class="waves-effect waves-light btn" id="ramp-properties-flip-vert">Flip Vert.</a>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- Hideable global properties window for each element -->
    <div id="globalprops">
      <div class="center-align">
        <h5 class="pad-sides">Global Properties</h5>
        <div class="row">
          <div class="input-field col s6">
            <input type="number" id="glob-xaccel" placeholder="" title="Enter a number"></input>
            <label for="glob-xaccel" class="active">Horizontal Acceleration</label>
          </div>
          <div class="input-field col s6">
            <input type="number" id="glob-yaccel" placeholder="" title="Enter a number"></input>
            <label for="glob-yaccel" class="active">Vertical Acceleration</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <select id="coord-sys" class="browser-default">
              <option disabled>Coordinate System:</option>
              <option value="cartesian" selected="selected">Cartesian</option>
              <option value="polar" >Polar</option>
            </select>
            <label for="coord-sys" class="active">Coordinate System</label>
          </div>
        </div>
        <!--
        <div class="row">
          <div class="input-field col s6">
            <select id="glob-length-unit" class="browser-default">
              <option disabled>Length Unit</option>
              <option value="1000.0" >Millimeters</option>
              <option value="100.0" >Centimeters</option>
              <option value="1.0" selected="selected">Meters</option>
              <option value="0.001" >Kilometers</option>
              <option value="39.3701" >Inches</option>
              <option value="3.28084" >Feet</option>
              <option value="1.09361" >Yards</option>
              <option value="0.000621371" >Miles</option>
            </select>
            <label for="glob-length-unit" class="active">Length Unit</label>
          </div>
          <div class="input-field col s6">
            <select id="glob-time-unit" class="browser-default">
              <option disabled>Time Unit</option>
              <option value="1000.0" >Milliseconds</option>
              <option value="1.0" selected="selected">Seconds</option>
              <option value="0.01666666667" >Minutes</option>
              <option value="0.00027777778" >Hours</option>
            </select>
            <label for="glob-time-unit" class="active">Time Unit</label>
          </div>
        </div>
        -->
        <div class="row">
          <div class="col s5">
            <div class="toolbox-item-container card" title="Origin">
              <span class="activator clickable toolbox-tooltip"><i class="fa fa-question-circle fa-size-tiny"></i></span>
              <div class="valign-wrapper">
                <img class="toolbox-item ui-draggable clickable responsive-img valign" width="100" src="/static/img/toolbox/target.png"/>
              </div>
              <div class="card-reveal">
                <span class="card-title clickable left"><i class="fa fa-times fa-size-tiny"></i></span>
                <p>Change the origin of the simulation!</p>
              </div>
            </div>
          </div>

          <div class="input-field col s3">
            <input type="number" id="glob-xorigin" placeholder="" value="0" title="Enter a number"></input>
            <label for="glob-xorigin" class="active">Origin X</label>
          </div>
          <div class="input-field col s3">
            <input type="number" id="glob-yorigin" placeholder="" value="0" title="Enter a number"></input>
            <label for="glob-yorigin" class="active">Origin Y</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Overview with a dynamically populated list of all active elements -->
    <div id="overview">
      <div class="center-align">
        <h5 class="pad-sides">Scene Overview</h5>
        <div class="row" >
          <ul id ="overview-list"></ul>
        </div>
      </div>
    </div>
  </div>
  <div class="help-tooltip-container">
    <div id="help-tooltip-simulator" class="help-tooltip card">
      <p>Drag any component from the toolbox into the simulator, select it, give it some velocity, then click play!</p>
    </div>
    <div id="help-tooltip-properties" class="help-tooltip card">
      <p>Navigate between the Toolbox, the Element Properties, the Global Properties, and the Overview panels.</p>
    </div>
    <div id="help-tooltip-toolbox" class="help-tooltip card">
      <p>Drag any of the desired components above into the simulator!</p>
    </div>
  </div>
</div>
<!---------- End Simulator and property window  ---------->


<!-- Play button and slider -->
<div class="row">
  <div class="col s1">
    <div class="help-tooltip-container">
      <button type="button" class="waves-effect waves-light btn-floating blue darken-1" id="playpause">
        <span aria-hidden="true"><i id="play-pause-icon" class="fa fa-play fa-size-tiny"></i></span>
      </button>
      <div id="help-tooltip-play" class="help-tooltip card">
        <p>Click play or scrub to a specific frame with the slider!</p>
      </div>
    </div>
  </div>
  <div class="col s11">
    <input type="range" min="0" max="3999" step="1" value="0" id="simulatorFrameRange" oninput="onRangeUpdate()" />
  </div>
</div>

<!-- Graphing acceleration velocity and position -->
<div class="row">
  <div id="pvaGraphContainer" class="col s12">
    <div id="positionGraph"></div>
    <div id="vaGraph"></div>
  </div>
</div>

<!-- This is the context menu -->
<div class="context-menu">
  <span>Object Properties</span>
  <ul>
    <li class="context-menu-item">
      <span>Vectors</span>
      <div class="switch">
        <label>
          Off
          <input class="vector-toggle" id="pointmass-properties-vector-cmenu" type="checkbox"></input>
          <span class="lever"></span>
          On
        </label>
      </div>
    </li>
    <li class="context-menu-item">
      <span>Tip-to-Tail Vectors</span>
      <div class="switch">
        <label>
          Off
          <input class="ttt-toggle" id="pointmass-properties-vector-ttt-cmenu" type="checkbox"></input>
          <span class="lever"></span>
          On
        </label>
      </div>
    </li>
    <li class="context-menu-item">
      <span>PVA Graph</span>
      <div class="switch">
        <label>
          Off
          <input class="pvagraph-toggle" id="pointmass-properties-pvagraph-cmenu" type="checkbox"></input>
          <span class="lever"></span>
          On
        </label>
      </div>
    </li>
  </ul>
</div>

{{ end }}
